# NIP 16 - Components Library

```
    NIP: 16
    Layer: Library
    Title: Components Library
    Author: Gregory Saive <greg@evias.be>
            Oleh Makarenko <olegomm@gmail.com>
    Discussions-To: #sig-client
    Comments-URI: https://github.com/nemtech/NIP/issues/52
    Status: Draft
    Type: Standards Track
    Created: 2020-06-19
    License: Apache-2.0
```

## Table of contents

- [Introduction](#introduction)
- [Motivation](#motivation)
- [Rationale](#rationale)
- [Specification](#specification)
  * [Requirements](#requirements)
  * [Terminology](#terminology)
- [Design Decisions](#design-decisions)
- [Implementation](#implementation)
  * [Packaging Proposal](#packaging-proposal)
  * [Architecture Proposal](#architecture-proposal)
  * [Implementation Proposal](#implementation-proposal)
    + [Symbol Components](#symbol-components)
  * [Example Library Usage](#example-library-usage)
  * [Ongoing Work](#ongoing-work)
- [Backwards compatibility](#backwards-compatibility)
- [References](#references)
- [History](#history)

## Introduction

> That "blockchain" is complex, end-users shouldn't notice.

This document aims to provide with a technical specification of a **components library** for direct coupling of Software with Symbol.

## Motivation 

Facilitate and accelerate the processes of _integration_ of Symbol features in Client Software.

Streamline the integration of Symbol features in a _componentised framework_ which shall be made compatible with the [W3C Specification for Web Components][w3c-web-components].

Increase the capacity of cross-client integrations for Symbol.

## Rationale

The integration of Symbol features in Client Software, e.g. in the Browser, can become cumbersome and oftenwise ends up being client specific. Namely, each client software to date comes with different components for same features scope.

The W3C specification for custom elements provides a way for authors to build their own fully-featured DOM elements. These custom elements can then be used by _any_ client software that is compatible with HTML5 templating.

## Specification

### Requirements

The components library shall provide with components that are reusable, extendable and customisable.

- MUST have a standard interface to query feasibility of connection and return a reason for failures.
- MUST be able to perform read operations for Symbol datasets.
- MUST define standard internationalised notifications.
- MAY require signed data to be passed to the Component.
- MAY be able to perform write operations for Symbol datasets.

### Terminology

A **component** is a custom DOM element as defined in the [W3C Specification for Custom Elements][w3c-custom-elm-spec].

A **user** represents a user of the components library. Users could be developers, system integrators or website owners.

A **viewer** represents an end-user of the published package. End-users could be any one visitor of a system who views the components library in execution (i.e.: visitors of a website).

## Design Decisions

### 1. Programming language

The programming language of choice will be Typescript as such that the components library can make use of the [symbol-sdk][src-sdk].

Components will be grouped under **native modules** that are then exported such that each Component can integrate Symbol with its own feature set integration practises.

### 2. Components Submodules

Due to the fact that components will reside within there own folder inside the `src/components/` folder, it is possible that subsequent components would be added to the components library in the form of git submodules.

A new component that is to be implemented will typically be discussed and defined in **this** NIP in [this section][#symbol-components].

### 3. Network agnostic

Components that are implemented into `symbol-components` MUST be network agnostic in that they MUST permit their usage on any Symbol network.

### 4. Usage of StencilJS

The components library will make use of the [**Stencil compiler**](https://stenciljs.com/docs/introduction) for producing W3C compliant custom DOM elements.

Some care is necessary with regards to using _external libraries and/or resources_ because Stencil compiles components for use in the browser or other HTML rendering systems and users may not dispose of said packages when importing the components library.

## Implementation

This document defines a **Components Library**.

Defined components will leverage different feature sets of Symbol networks. More detailed implementation details will be described here.

In order to generalize and facilitate components integration with Symbol, we will publish **one software package** that integrates _all Components_.

The released software package will be developed with Typescript, using the [symbol-sdk@>=0.18.0][src-sdk] package, where it is deemed necessary, to integrate latest Symbol features. The library MUST provide with interfaces and classes, which developers can leverage to integrate with Symbol features.

As a proof of concept for this library, the components library shall provide with a [Storybook](https://storybook.js.org/docs) for integration of the components library in HTML and/or different programming langages.

### Packaging Proposal

A deliverable NPM package will be produced along with this NIP.

Following are the available package name suggestions, more may be added at a later point:

- [ ] ~~`symbol-web-components`~~
- [ ] ~~`symbol-client-components`~~
- [ ] ~~`symbol-integration`~~
- [x] `symbol-components`

The decision making process for this package name selection will be made internally, more suggestions are welcome.

### Architecture Proposal

Each of our Components will implement features with a pre-defined feature set of Symbol. This is important to note as this knowledge will influence the architecture of the released package. Following solution proposal can be applied:

```
- package.json
> resources/
  - symbol-sdk.min.js
  - config-network.properties.mt
> src/
  > providers/
    - MongoProvider.ts
    - RESTProvider.ts
  > components/
    > example-component/
      - example-component.css
      - example-component.spec.ts
      - example-component.e2e.ts
      - example-component.tsx
  - components.d.ts
  - index.ts
```

### Implementation Proposal

#### Symbol Components

This section SHOULD reflect the implementation proposal in [Source code for the `symbol-components` Library][src-nip16] and MUST list component's user interface proposals.

Following table should describe components that have been implemented or are being implemented in the components library:

| DOM Element | User interface proposal | Description |
| ----------- | ----------------------- | ----------- |
| `<symbol-transaction-icon>` | [components.md](nip-0016/components.md#symbol-transaction-icon) | The _transaction icon component_ shall provide with an icon (image) that can be colored and reflects the type of a transaction. |
| `<symbol-node-health-icon>` | [components.md](nip-0016/components.md#symbol-node-health-icon) | The _node health icon component_ shall provide with an icon (image) which reflects the health status of a Symbol network node. |
| `<symbol-signatures-progressbar>` | [components.md](nip-0016/components.md#symbol-signatures-progressbar) | The _signatures progressbar component_ shall provide with a progressbar which reflects the progress of incoming signatures for Symbol transactions. |
| `<symbol-transaction-schema>` | [components.md](nip-0016/components.md#symbol-transaction-schema) | The _transaction schema component_ shall provide with an image which reflects the _content_ of Symbol transactions. |

The above table for the `symbol-components` library is subject to change.

### Example Library Usage

```html
  <!-- Add symbol-sdk support -->
  <script src="./symbol-sdk.js"></script>

  <!-- Include Symbol Components Library Styles -->
  <link rel="stylesheet" href="https://unpkg.com/@symbolui/symbol-components@0.3.0/dist/symbol-components/symbol-components.css">

  <!-- Add modern browser support for symbol-components (ES Module) -->
  <script type="module" src="https://unpkg.com/@symbolui/symbol-components@0.3.0/dist/symbol-components/symbol-components.esm.js"></script>
```

```html
  <symbol-transaction-icon type="transfer"></symbol-transaction-icon>
```

### Ongoing Work

| Story | Assigned | Progress |
| --- | --- | --- |
| Describe transaction icon component | @evias | ![Progress](https://progress-bar.dev/100/) |
| Describe node health icon component | @evias | ![Progress](https://progress-bar.dev/100/) |
| Describe signatures progress bar component | @evias | ![Progress](https://progress-bar.dev/100/) |
| Describe transaction schema component | @OlegMakarenko | ![Progress](https://progress-bar.dev/20/) |

## Backwards compatibility

This standard is backwards compatible with Symbol Mosaics, Accounts, Transactions and Namespaces.

## References

- [Symbol Typescript SDK][src-sdk]
- [Symbol][symbol] protocol
- [Symbol Developer Center][symbol-dev-center]

## Annexes

Annexes to this NIP are listed below:

- [Annex 1: Components][annex-1]
- [Source code for `symbol-components` Library][src-nip16]

## History

| **Date**     | **Version**    |
| ------------ | -------------- |
| June 20 2020 | Initial Draft  |

[annex-1]:nip-0016/components.md
[symbol]:https://github.com/nemtech/catapult-server
[symbol-dev-center]:https://nemtech.github.io
[w3c-web-components]:https://w3c.github.io/webcomponents/explainer/
[w3c-custom-elm-spec]:https://html.spec.whatwg.org/multipage/custom-elements.html#custom-elements
[src-sdk]:https://github.com/nemtech/symbol-sdk-typescript-javascript
[src-nip16]:https://github.com/symbol/symbol-components
